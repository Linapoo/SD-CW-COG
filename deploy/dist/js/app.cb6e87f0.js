(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"12f2":function(t,e,n){"use strict";var a=n("bb88"),s=n.n(a);s.a},"34b5":function(t,e,n){"use strict";var a=n("65f2"),s=n.n(a);s.a},"4a3a":function(t,e,n){"use strict";var a=n("b9ae"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i=(n("7c55"),n("2877")),o={},c=Object(i["a"])(o,s,r,!1,null,null,null),l=c.exports,u=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"content"},[n("div",{staticClass:"login-container animated fadeInDown",staticStyle:{"animation-delay":".3s"}},[n("div",{staticClass:"login justify-content-center",attrs:{id:"login-form"}},[t._m(0),n("div",{staticClass:"form-container animated fadeIn",staticStyle:{"animation-delay":".7s"}},[n("form",{attrs:{method:"POST"}},[t._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.userName,expression:"user.userName"}],attrs:{name:"userName"},domProps:{value:t.user.userName},on:{input:function(e){e.target.composing||t.$set(t.user,"userName",e.target.value)}}}),t._m(2),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),n("div",{staticClass:"submit-buttons"},[n("input",{attrs:{type:"button",value:"Connect"},on:{click:t.login}}),n("input",{staticClass:"btn-register",attrs:{type:"button",value:"Sign Up"},on:{click:function(e){return t.$router.push("/register")}}})])])])]),n("div",{staticClass:"login animated fadeIn",staticStyle:{"animation-delay":".7s","animation-duration":"4s"},attrs:{id:"login-bg"}})])])])},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"form-title"},[n("i",{staticClass:"fas fa-user",staticStyle:{color:"#55a0ff"}}),n("br"),t._v("LOGIN\n\t\t\t\t\t"),n("hr")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fas fa-at"}),t._v(" UserName\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fab fa-slack-hash"}),t._v(" Password\n\t\t\t\t\t\t")])}],f={data:function(){return{user:{}}},methods:{login:function(){var t=this;this.$http({url:"/user/login",method:"post",data:this.user}).then((function(e){sessionStorage.setItem("userName",e.userName),sessionStorage.setItem("userId",e.id),sessionStorage.setItem("userInfo",JSON.stringify(e)),t.$router.push("/page/home")}))}}},p=f,h=(n("4a3a"),Object(i["a"])(p,d,m,!1,null,"443eb31e",null)),g=h.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"content"},[n("div",{staticClass:"login-container animated fadeInDown",staticStyle:{"animation-delay":".3s"}},[n("div",{staticClass:"login justify-content-center",attrs:{id:"login-form"}},[t._m(0),n("div",{staticClass:"form-container animated fadeIn",staticStyle:{"animation-delay":".7s"}},[n("form",{staticStyle:{height:"60vh",overflow:"auto"},attrs:{method:"POST"}},[t._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.userName,expression:"info.userName"}],attrs:{type:"text",name:"name",placeholder:"Name",required:"",autofocus:""},domProps:{value:t.info.userName},on:{input:function(e){e.target.composing||t.$set(t.info,"userName",e.target.value)}}}),t._m(2),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.email,expression:"info.email"}],attrs:{type:"email",name:"email",placeholder:"E-mail"},domProps:{value:t.info.email},on:{input:function(e){e.target.composing||t.$set(t.info,"email",e.target.value)}}}),t._m(3),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.password,expression:"info.password"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.info.password},on:{input:function(e){e.target.composing||t.$set(t.info,"password",e.target.value)}}}),t._m(4),n("input",{attrs:{type:"password",name:"password_confirmation",placeholder:"Password"}}),t._m(5),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.age,expression:"info.age"}],attrs:{type:"text",placeholder:"Age",required:"",autofocus:""},domProps:{value:t.info.age},on:{input:function(e){e.target.composing||t.$set(t.info,"age",e.target.value)}}}),t._m(6),n("br"),n("br"),n("div",{staticStyle:{display:"flex"}},[n("span",{staticStyle:{width:"50px"}},[t._v("Male")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.gender,expression:"info.gender"}],staticStyle:{width:"150px"},attrs:{type:"radio",name:"gender"},domProps:{value:0,checked:t._q(t.info.gender,0)},on:{change:function(e){return t.$set(t.info,"gender",0)}}})]),n("div",{staticStyle:{display:"flex"}},[n("span",{staticStyle:{width:"50px"}},[t._v("Female")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.gender,expression:"info.gender"}],staticStyle:{width:"150px"},attrs:{type:"radio",name:"gender"},domProps:{value:1,checked:t._q(t.info.gender,1)},on:{change:function(e){return t.$set(t.info,"gender",1)}}})]),t._m(7),n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.city,expression:"info.city"}],attrs:{type:"text",placeholder:"City",required:"",autofocus:""},domProps:{value:t.info.city},on:{input:function(e){e.target.composing||t.$set(t.info,"city",e.target.value)}}}),n("div",{staticClass:"submit-buttons"},[n("input",{staticStyle:{background:"#55efc4"},attrs:{type:"submit",value:"Submit"},on:{click:t.register}})])])])]),n("div",{staticClass:"login animated fadeIn",staticStyle:{"animation-delay":".7s","animation-duration":"4s"},attrs:{id:"login-bg"}})])])])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"form-title"},[n("i",{staticClass:"fas fa-user",staticStyle:{color:"#55a0ff"}}),n("br"),t._v("Sign Up\n\t\t\t\t\t"),n("hr")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fab fa-amilia"}),t._v(" Name\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fas fa-at"}),t._v(" Email\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fab fa-slack-hash"}),t._v(" Password\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fab fa-slack-hash"}),t._v(" Confirm Password\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fab fa-amilia"}),t._v(" Age\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fab fa-amilia"}),t._v(" Gender\n\t\t\t\t\t\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:""}},[n("i",{staticClass:"fab fa-amilia"}),t._v(" City\n\t\t\t\t\t\t")])}],b={name:"home",components:{},data:function(){return{info:{}}},created:function(){},methods:{register:function(){var t=this;this.$http({url:"/user/register",method:"post",data:this.info}).then((function(e){t.$Notify({title:"Register Ok",type:"success"})}))}}},w=b,_=(n("fcbd"),Object(i["a"])(w,v,y,!1,null,"c643e7ca",null)),I=_.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.tableData.length?n("at-alert",{attrs:{message:"New Friends",description:"You have "+t.tableData.length+" friend requests",type:"info","show-icon":"",closable:""},nativeOn:{click:function(e){t.showFriends=!0}}}):t._e(),n("div",{staticClass:"wrapper"},[n("List",{staticStyle:{"margin-right":"100px"},attrs:{data:t.list},on:{"item-click":t.handleClick}}),n("Trend",{attrs:{data:t.trend},on:{go:t.go}})],1),n("at-modal",{attrs:{title:"New Friends"},model:{value:t.showFriends,callback:function(e){t.showFriends=e},expression:"showFriends"}},[n("at-table",{attrs:{columns:t.cols,data:t.tableData,border:!1}})],1)],1)},S=[],P=(n("6c7b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",t._l(t.data,(function(e,a){return n("li",{key:a,on:{click:function(n){return n.stopPropagation(),t.$emit("item-click",e)}}},[n("img",{attrs:{src:e.img||"https://misc.aotu.io/koppthe/at-ui/cover.jpg",alt:""}}),n("a",[t._v(t._s(e.name))])])})),0)}),$=[],O={props:{data:{type:Array,default:function(){return{}}}}},k=O,x=(n("12f2"),Object(i["a"])(k,P,$,!1,null,"71a56121",null)),N=x.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper-trend"},[n("h1",[t._v("Trend")]),n("ul",t._l(t.data,(function(e,a){return n("li",{key:a,staticStyle:{display:"flex","justify-content":"space-between"}},[n("span",[t._v("\n\t\t\t\t"+t._s(a+1)+"    \n\t\t\t\t"),n("a",{on:{click:function(n){return t.go(e.id)}}},[t._v(t._s(e.name))])]),n("at-rate",{attrs:{value:e.score,disabled:""}})],1)})),0)])},R=[],A={props:{data:{type:Array,default:function(){return{}}}},methods:{go:function(t){console.log(t),this.$emit("go",t)}}},T=A,E=(n("c44e"),Object(i["a"])(T,j,R,!1,null,"6217e15e",null)),D=E.exports,G={components:{List:N,Trend:D},data:function(){var t=this;return{list:new Array(1).fill({img:"https://misc.aotu.io/koppthe/at-ui/cover.jpg",name:"TOM"}),trend:new Array(1).fill({name:"TOM"}),pageSize:999,pageNo:1,totalPage:1,showFriends:!1,tableData:[],cols:[{title:"userName",key:"userName"},{title:"requestTime",key:"requestTime"},{title:"Action",render:function(e,n){return e("AtButton",{props:{size:"smaller",type:"info",hollow:!0},on:{click:function(){t.$http({url:"/friendship/acceptFriendship",method:"post",data:{friendId:n.item.id,userId:sessionStorage.getItem("userId")}}).then((function(e){t.$Notify({title:"Success",type:"success"}),t.getFrendRequest()}))}}},"Accept")}}]}},created:function(){this.getAllGames(),this.getFrendRequest(),this.getGameTrend()},methods:{handleClick:function(t){this.$router.push("/page/game?id="+t.id)},getFrendRequest:function(){var t=this;this.$http({url:"/friendship/getFriendRequests",method:"get",data:{pageSize:this.pageSize,pageNo:this.pageNo,userId:sessionStorage.getItem("userId")}}).then((function(e){e.data&&(t.tableData=e.data)}))},getAllGames:function(){var t=this;this.$http({url:"/game/viewAll",method:"get",data:{pageSize:this.pageSize,pageNo:this.pageNo}}).then((function(e){t.list=e.data.map((function(t){return{name:t.gameName,id:t.id}})),t.totalPage=e.totalPage}))},go:function(t){this.$router.push("/page/game?id="+t)},getGameTrend:function(){var t=this;this.$http({url:"/game/sortScore",method:"get",data:{pageSize:10,pageNo:1}}).then((function(e){e.data&&(t.trend=e.data.map((function(t){return{name:t.gameName,score:t.averageScore,id:t._id}})))}))}}},F=G,M=(n("c08b"),Object(i["a"])(F,C,S,!1,null,"d84910ee",null)),q=M.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"form"},[n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("userName")]),n("at-input",{model:{value:t.userInfo.userName,callback:function(e){t.$set(t.userInfo,"userName",e)},expression:"userInfo.userName"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("email")]),n("at-input",{model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("city")]),n("at-input",{model:{value:t.userInfo.city,callback:function(e){t.$set(t.userInfo,"city",e)},expression:"userInfo.city"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("gender")]),n("at-radio",{attrs:{label:0},model:{value:t.userInfo.gender,callback:function(e){t.$set(t.userInfo,"gender",e)},expression:"userInfo.gender"}},[t._v("Male")]),n("at-radio",{attrs:{label:1},model:{value:t.userInfo.gender,callback:function(e){t.$set(t.userInfo,"gender",e)},expression:"userInfo.gender"}},[t._v("Female")])],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("age")]),n("at-input-number",{attrs:{min:0,max:100},model:{value:t.userInfo.age,callback:function(e){t.$set(t.userInfo,"age",e)},expression:"userInfo.age"}})],1),n("br"),n("at-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("Submit")]),t._v("     \n\t\t"),n("at-button",{attrs:{type:"primary"},on:{click:function(e){t.showModal=!0}}},[t._v("Reset Password")]),n("br"),n("br"),n("h2",[t._v("My Games")]),n("at-table",{attrs:{columns:t.gameCols,data:t.gameList,border:!1}}),n("br"),n("br"),n("h2",[t._v("My Friends")]),n("at-table",{attrs:{columns:t.friendCols,data:t.friendList,border:!1}}),n("at-modal",{attrs:{title:"Reset Password"},on:{"on-confirm":t.handleConfirm,"on-cancel":t.handleCancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticClass:"form"},[n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("Old Password")]),n("at-input",{attrs:{type:"password"},model:{value:t.resetInfo.oldPwd,callback:function(e){t.$set(t.resetInfo,"oldPwd",e)},expression:"resetInfo.oldPwd"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("New Password")]),n("at-input",{attrs:{type:"password"},model:{value:t.resetInfo.newPwd,callback:function(e){t.$set(t.resetInfo,"newPwd",e)},expression:"resetInfo.newPwd"}})],1)])])],1)])},L=[],U=(n("8e6e"),n("ac6a"),n("456d"),n("bd86"));function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){Object(U["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y={created:function(){this.userInfo=JSON.parse(sessionStorage.getItem("userInfo"))||{},this.getMyGames(),this.getMyFriends()},data:function(){var t=this;return{userInfo:{},resetInfo:{},showModal:!1,gameCols:[{title:"Name",key:"gameName"},{title:"Action",render:function(e,n){return e("AtButton",{props:{size:"smaller",type:"info",hollow:!0},on:{click:function(){t.$http({url:"/game/delToUser",method:"Delete",data:{gameId:n.item.id,userId:sessionStorage.getItem("userId")}}).then((function(e){t.$Notify({title:"Success",type:"success"}),t.getMyGames()}))}}},"Delete")}}],friendCols:[{title:"userName",key:"userName"},{title:"Action",render:function(e,n){return e("AtButton",{props:{size:"smaller",type:"info",hollow:!0},on:{click:function(){t.$http({url:"/friendship/delete",method:"delete",data:{friendId:n.item.id,userId:sessionStorage.getItem("userId")}}).then((function(e){t.$Notify({title:"Success",type:"success"}),t.getMyFriends()}))}}},"Delete")}}],gameList:[],friendList:[]}},methods:{handleConfirm:function(){var t=this;this.$http({url:"/user/resetPwd",method:"put",data:J({},this.resetInfo,{uid:sessionStorage.getItem("userId")})}).then((function(e){t.$Modal.alert({title:"Success",content:"Please login again",callback:function(t){this.$router.push("/")}})}))},handleCancel:function(){},getMyGames:function(){var t=this;this.$http({url:"/game/viewUserGame",method:"get",data:{userId:sessionStorage.getItem("userId"),pageSize:9999,pageNo:1}}).then((function(e){t.gameList=e.data||[]}))},submit:function(){var t=this;this.$http({url:"/user/updateUserInfo",method:"put",data:J({},this.userInfo,{uid:sessionStorage.getItem("userId")})}).then((function(e){t.$Notify({title:"Success",type:"success"}),sessionStorage.setItem("userName",t.userInfo.userName),sessionStorage.setItem("userInfo",JSON.stringify(t.userInfo))}))},getMyFriends:function(){var t=this;this.$http({url:"/friendship/myFriends",method:"get",data:{userId:sessionStorage.getItem("userId"),pageSize:9999,pageNo:1}}).then((function(e){t.friendList=e.data||[]}))}}},W=Y,H=(n("a5b1"),Object(i["a"])(W,z,L,!1,null,"3e69fbf2",null)),K=H.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("List",{staticStyle:{"margin-right":"100px"},attrs:{data:t.list}}),n("Trend",{attrs:{data:t.trend}})],1)},V=[],X={components:{List:N,Trend:D},data:function(){return{list:new Array(8).fill({img:"https://misc.aotu.io/koppthe/at-ui/cover.jpg",name:"TOM"}),trend:new Array(8).fill({name:"TOM"})}}},Z=X,tt=(n("34b5"),Object(i["a"])(Z,Q,V,!1,null,"27082b66",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"card"},[n("h1",[t._v(t._s(t.game.gameName))]),n("br"),n("h4",[t._v(t._s(t.game.description))])]),n("div",{staticClass:"tab"},[t._m(0),n("at-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.showDialog=!0}}},[t._v("+ speak")])],1),n("at-table",{attrs:{columns:t.cols,data:t.tableData,border:!1}}),n("at-modal",{attrs:{title:"Create a post"},on:{"on-confirm":t.handleConfirm,"on-cancel":t.handleCancel},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[n("div",{staticClass:"form"},[n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("title")]),n("at-input",{model:{value:t.newPost.title,callback:function(e){t.$set(t.newPost,"title",e)},expression:"newPost.title"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("content")]),n("at-textarea",{attrs:{"min-rows":4},model:{value:t.newPost.content,callback:function(e){t.$set(t.newPost,"content",e)},expression:"newPost.content"}})],1)])]),n("at-modal",{attrs:{title:"Replies",width:"1200"},model:{value:t.showPost,callback:function(e){t.showPost=e},expression:"showPost"}},[n("div",{staticClass:"form",staticStyle:{width:"95%"}},[n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("title")]),n("at-input",{attrs:{readonly:""},model:{value:t.currPost.title,callback:function(e){t.$set(t.currPost,"title",e)},expression:"currPost.title"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("content")]),n("at-textarea",{attrs:{"min-rows":4,readonly:""},model:{value:t.currPost.content,callback:function(e){t.$set(t.currPost,"content",e)},expression:"currPost.content"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("replies")]),n("at-table",{attrs:{columns:t.replyCol,data:t.replyList,border:!1}})],1),n("br"),t.showAddReplyBtn?n("at-button",{attrs:{type:"primary"},on:{click:function(e){t.showAddReply=!0}}},[t._v("Add a Reply")]):t._e(),n("br"),n("br"),t.showAddReply?n("div",{staticClass:"form-item"},[n("at-textarea",{attrs:{"min-rows":4},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}}),n("br"),n("at-button",{on:{click:function(e){return t.addReply("")}}},[t._v("Submit")])],1):t._e()],1)])],1)},at=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a",[t._v("Recent discussions")]),t._v("   /  \n\t\t\t"),n("a",[t._v("Hottest discussions")])])}];function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){Object(U["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var it={data:function(){var t=this;return Object(U["a"])({id:this.$route.query.id,game:{name:"xxx",desc:"xxxx"},cols:[{title:"Discuss",key:"discuss",render:function(e,n){return e("AtButton",{props:{size:"small",type:"text"},on:{click:function(){t.currPost=n.item,t.getReply(n.item.id),t.showPost=!0}}},n.item.discuss)}},{title:"Author",render:function(t,e){return t("User",{props:{userInfo:e.item.author}})}},{title:"Respond",key:"numReply"},{title:"FinalResponse",key:"finalResponse"},{title:"Detail",render:function(e,n){return e("AtButton",{props:{size:"smaller",type:"info",hollow:!0},on:{click:function(){t.currPost=n.item,t.getReply(n.item.id),t.showPost=!0}}},"Replies")}}],showPost:!1,tableData:[],showDialog:!1,newPost:{},forumInfo:{},currPost:{},replyContent:"",showAddReply:!1,replyCol:[{title:"Author",render:function(t,e){return t("User",{props:{userInfo:e.item.author}})}},{title:"Content",key:"content"},{title:"Time",key:"replyTime"},{title:"TargetReply",key:"targetReplyContent"},{title:"Action",key:"discuss",render:function(e,n){return e("AtButton",{props:{size:"small"},on:{click:function(){t.showAddReplyBtn=!1,t.showAddReply=!0,t.currTargetReply=n.item.id}}},"Reply")}}],replyList:[],currTargetReply:"",showAddReplyBtn:!0},"currTargetReply","")},created:function(){var t=this;this.getGameInfo(),this.getForumInfo().then((function(){t.getPosts()}))},methods:{getGameInfo:function(){var t=this;this.$http({url:"/game/view",method:"get",data:{gameId:this.id}}).then((function(e){t.game=e}))},getReply:function(t){var e=this;this.$http({url:"/forum/getReplies",method:"get",data:{postId:t,pageNo:1,pageSize:99999}}).then((function(t){e.replyList=t.data.map((function(t){return rt({targetReplyContent:t.targetReply&&t.targetReply.content},t,{replyTime:new Date(t.replyTime).toLocaleString()})}))}))},getForumInfo:function(){var t=this;return this.$http({url:"/forum/getForumInfo",method:"get",data:{gameId:this.id}}).then((function(e){t.forumInfo=e}))},getPosts:function(){var t=this;this.$http({url:"/forum/getPosts",method:"get",data:{forumId:this.forumInfo.id,pageNo:1,pageSize:99999}}).then((function(e){t.tableData=e.data.map((function(t){var e=t.content;return rt({},t,{discuss:t.title,finalResponse:new Date(t.finalReplyTime).toLocaleString(),content:e,numReply:t.numReply,id:t.id})}))}))},handleConfirm:function(){var t=this;this.$http({url:"/forum/createPost",method:"post",data:rt({},this.newPost,{forumId:this.forumInfo.id,authorId:sessionStorage.getItem("userId")})}).then((function(e){t.getForumInfo(),t.getPosts()}))},handleCancel:function(){},addReply:function(){var t=this,e={postId:this.currPost.id,content:this.replyContent,authorId:sessionStorage.getItem("userId")};this.currTargetReply&&(e.targetReplyId=this.currTargetReply),this.$http({url:"/forum/addReply",method:"post",data:e}).then((function(e){t.showAddReply=!1,t.currTargetReply="",t.showAddReplyBtn=!0,t.getReply(t.currPost.id),t.replyContent=""}))}}},ot=it,ct=(n("d169"),Object(i["a"])(ot,nt,at,!1,null,"7753f4c2",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",[n("div",{staticClass:"top"},[n("div",[n("router-link",{attrs:{to:"home"}},[t._v("Main Page")])],1),n("div",[n("router-link",{attrs:{to:"my"}},[t._v("My Account")]),n("router-link",{attrs:{to:"/"}},[t._v("Logout")])],1)]),n("div",{staticClass:"bottom"},[n("at-input",{staticStyle:{width:"50vw"},attrs:{size:"large","append-button":""},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[n("template",{slot:"append"},[n("i",{staticClass:"icon icon-search",on:{click:t.searchGame}})])],2)],1)]),n("router-view",{key:t.$route.fullPath})],1)},dt=[],mt={data:function(){return{query:""}},methods:{searchGame:function(){var t=this;this.query&&this.$http({url:"/game/search",method:"get",data:{gameName:this.query,pageSize:9999999,pageNo:1}}).then((function(e){if(e.data&&e.data.length){var n=e.data[0];t.query="",t.$router.push("/page/game?id="+n.id)}else alert("No Results")}))}}},ft=mt,pt=(n("88a2"),Object(i["a"])(ft,ut,dt,!1,null,"5af863c3",null)),ht=pt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"info"},[n("div",{staticClass:"title"},[n("h2",[t._v(t._s(t.game.gameName))]),t.isCollected?n("at-button",{attrs:{type:"warning",icon:"icon-trash-2"},on:{click:t.del}},[t._v("delete")]):n("at-button",{attrs:{type:"primary",icon:"icon-plus"},on:{click:t.collect}},[t._v("collect")]),n("at-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"text"},on:{click:t.goForum}},[t._v("Go to Forums of "+t._s(t.game.gameName)+" >>")])],1),n("div",{staticClass:"base"},[n("img",{attrs:{src:t.game.img||"https://misc.aotu.io/koppthe/at-ui/cover.jpg",alt:""}}),n("div",[n("div",[n("span",[t._v("artist")]),t._v("\n\t\t\t\t\t"+t._s(t.game.artist)+"\n\t\t\t\t")]),n("div",[n("span",[t._v("designer")]),t._v("\n\t\t\t\t\t"+t._s(t.game.designer)+"\n\t\t\t\t")]),n("div",[n("span",[t._v("publisher")]),t._v("\n\t\t\t\t\t"+t._s(t.game.publisher)+"\n\t\t\t\t")]),n("div",[n("span",[t._v("timePerRound")]),t._v("\n\t\t\t\t\t"+t._s(t.game.timePerRound)+"\n\t\t\t\t")]),n("div",[n("span",[t._v("year")]),t._v("\n\t\t\t\t\t"+t._s(t.game.year)+"\n\t\t\t\t")]),n("div",[n("span",[t._v("playerAge")]),t._v("\n\t\t\t\t\t"+t._s(t.game.playerAge)+"\n\t\t\t\t")])]),n("div",{staticClass:"buy",staticStyle:{"margin-left":"500px"}},[n("h3",[t._v("Buy")]),n("br"),n("at-button",{attrs:{hollow:"",type:"info"},on:{click:t.buy}},[t._v("Amazon.com")])],1)]),n("div",{staticClass:"comments"},[n("h2",[t._v("Short Comments...")]),n("at-button",{attrs:{type:"primary",icon:"icon-edit"},on:{click:function(e){t.showAdd=!0}}},[t._v("Write a Short Review")]),n("br"),n("br"),n("at-table",{attrs:{columns:t.cols,data:t.commentList,border:!1}})],1)]),n("at-modal",{attrs:{title:"Short Review"},on:{"on-confirm":t.handleConfirm},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[n("div",{staticClass:"form"},[n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("Content")]),n("at-textarea",{model:{value:t.comment.content,callback:function(e){t.$set(t.comment,"content",e)},expression:"comment.content"}})],1),n("br"),n("br"),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("Score")]),n("at-rate",{model:{value:t.comment.score,callback:function(e){t.$set(t.comment,"score",e)},expression:"comment.score"}})],1)])])],1)},vt=[];n("6762"),n("2fdb");function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){Object(U["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wt={data:function(){return{game:{},id:"",userGames:[],showAdd:!1,comment:{},commentList:[],cols:[{title:"Reviewer",key:"reviewerName",render:function(t,e){return t("User",{props:{userInfo:e.item.reviewer}})}},{title:"Content",key:"content"},{title:"Score",key:"score",render:function(t,e){return t("AtRate",{props:{disabled:!0,value:e.item.score}},e.item.discuss)}},{title:"Time",key:"postTime"}]}},created:function(){this.id=this.$route.query.id,this.getGameInfo(),this.getUserGame(),this.getComments()},computed:{isCollected:function(){return this.userGames.includes(this.id)}},methods:{goForum:function(){this.$router.push("/page/club?id="+this.id)},getGameInfo:function(){var t=this;this.$http({url:"/game/view",method:"get",data:{gameId:this.id}}).then((function(e){t.game=e}))},getGameImg:function(){this.$http({url:"/game/getImage",method:"get",data:{gameId:this.id}}).then((function(t){console.log(t)}))},getUserGame:function(){var t=this;this.$http({url:"/game/viewUserGame",method:"get",data:{userId:sessionStorage.getItem("userId"),pageSize:9999999,pageNo:1}}).then((function(e){e.data&&(t.userGames=e.data.map((function(t){return t.id})))}))},del:function(){var t=this;this.$http({url:"/game/delToUser",method:"delete",data:{gameId:this.id,userId:sessionStorage.getItem("userId")}}).then((function(e){t.getUserGame(),t.$Notify({title:"Success",type:"success"})}))},collect:function(){var t=this;this.$http({url:"/game/addToUser",method:"post",data:{gameId:this.id,userId:sessionStorage.getItem("userId")}}).then((function(e){t.getUserGame(),t.$Notify({title:"Success",type:"success"})}))},handleConfirm:function(){var t=this;this.$http({url:"/review/post",method:"post",data:bt({reviewerId:sessionStorage.getItem("userId"),gameId:this.id,anonymous:0},this.comment)}).then((function(e){t.getComments(),t.showAdd=!1,t.comment={}}))},buy:function(){window.open("https://www.amazon.co.uk/s?k="+encodeURI(this.game.gameName))},getComments:function(){var t=this;this.$http({url:"/review/viewGameReview",method:"get",data:{gameId:this.id,pageSize:9999999,pageNo:1}}).then((function(e){t.commentList=e.data.map((function(t){return bt({},t,{reviewerName:t.reviewer.userName,postTime:new Date(t.postTime).toLocaleString(),targetUserId:t.reviewer.id})}))}))}}},_t=wt,It=(n("a0b3"),Object(i["a"])(_t,gt,vt,!1,null,"a5661f18",null)),Ct=It.exports;a["default"].use(u["a"]);var St=new u["a"]({routes:[{path:"/",name:"login",component:g},{path:"/register",name:"register",component:I},{path:"/page",name:"page",component:ht,redirect:"/page/home",children:[{path:"/page/home",name:"home",component:q},{path:"/page/game",name:"game",component:Ct},{path:"/page/my",name:"my",component:K},{path:"/page/friends",name:"friends",component:et},{path:"/page/club",name:"club",component:lt}]}]}),Pt=n("2f62");a["default"].use(Pt["a"]);var $t=new Pt["a"].Store({state:{},mutations:{},actions:{}}),Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("at-tooltip",{attrs:{placement:"top",content:t.content}},[n("at-button",{attrs:{size:"small",type:"text"},on:{click:t.sendReq}},[t._v(t._s(t.userInfo.userName))])],1)},kt=[],xt={computed:{isYourself:function(){return this.userInfo.id===sessionStorage.getItem("userId")},content:function(){return this.isYourself?"Yourself":"Send a friend request"}},props:{userInfo:{type:Object}},methods:{sendReq:function(){var t=this;this.isYourself||this.$http({url:"/friendship/sendFriendRequest",method:"post",data:{senderId:sessionStorage.getItem("userId"),receiverId:this.userInfo.id}}).then((function(){t.$Notify.success({title:"Success"})}))}}},Nt=xt,jt=Object(i["a"])(Nt,Ot,kt,!1,null,null,null),Rt=jt.exports,At=n("44e4"),Tt=n.n(At),Et=(n("c58f"),n("96cf"),n("3b8d")),Dt=(n("6b54"),"http://www.cog.codes/api"),Gt=function(t){var e=t.url,n=t.method,s=t.data,r=Dt+e,i=n.toUpperCase(),o={headers:{"content-type":"application/json"},method:i};if("GET"===i||"DELETE"===i||"PUT"===i){var c=new URLSearchParams;for(var l in s)c.append(l,s[l]);r="".concat(r).concat(r.includes("?")?"&":"?").concat(c.toString())}else o.body=JSON.stringify(s);var u=!1;return fetch(r,o).then(function(){var t=Object(Et["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return u=e.ok,n={},t.prev=2,t.next=5,e.json();case 5:n=t.sent,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](2);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()).then((function(t){if(u)return t;throw a["default"].prototype.$Notify({title:"Oops",message:t.message||"Something went Wrong",type:"error"}),Error(t.message)}))},Ft=Gt;a["default"].use(Tt.a),a["default"].component("User",Rt),a["default"].config.productionTip=!1,a["default"].prototype.$http=Ft,new a["default"]({router:St,store:$t,render:function(t){return t(l)}}).$mount("#app")},"5c48":function(t,e,n){},6375:function(t,e,n){},"65f2":function(t,e,n){},"6a32":function(t,e,n){},"7c55":function(t,e,n){"use strict";var a=n("5c48"),s=n.n(a);s.a},"88a2":function(t,e,n){"use strict";var a=n("6a32"),s=n.n(a);s.a},a0b3:function(t,e,n){"use strict";var a=n("6375"),s=n.n(a);s.a},a5b1:function(t,e,n){"use strict";var a=n("b30d"),s=n.n(a);s.a},b30d:function(t,e,n){},b588:function(t,e,n){},b9a6:function(t,e,n){},b9ae:function(t,e,n){},bb88:function(t,e,n){},c08b:function(t,e,n){"use strict";var a=n("b588"),s=n.n(a);s.a},c44e:function(t,e,n){"use strict";var a=n("fd2b"),s=n.n(a);s.a},c6f8:function(t,e,n){},d169:function(t,e,n){"use strict";var a=n("b9a6"),s=n.n(a);s.a},fcbd:function(t,e,n){"use strict";var a=n("c6f8"),s=n.n(a);s.a},fd2b:function(t,e,n){}});
//# sourceMappingURL=app.cb6e87f0.js.map